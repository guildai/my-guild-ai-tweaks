// Variables

$guild-blue: #283593;
$guild-link: lighten($guild-blue, 10%);
$code-bg: #f0f0f0;
$fa-font: "Font Awesome 5 Pro";
$icon-gray: lighten($primary-high, 10%);

// Icons

$fa-angle-double-left: "\f100";
$fa-angle-double-right: "\f101";
$fa-check-circle: "\f058";
$fa-exclamation-circle: "\f06a";
$fa-external-link-alt: "\f35d";
$fa-file: "\f15b";
$fa-folder: "\f07b";
$fa-folder-open: "\f07c";
$fa-info-circle: "\f05a";
$fa-square: "\f0c8";
$fa-square-full: "\f45c";
$fa-stars: "\f762";

// Typography

html {
  font-family: 'Roboto',sans-serif;
}

h1, h2, h3, h4, h5, h6 {
  font-weight: 500;
}

b, strong {
  font-weight: 500;
}

h1, #topic-title h1 {
  font-size: 2em;
}

h2, .cooked h2, .d-editor-preview h2 {
  font-size: 1.6em;
}

h3, .cooked h3, .d-editor-preview h3 {
  font-size: 1.4em;
}

h4, .cooked h4, .d-editor-preview h4 {
  font-size: 1.2em;
}

h5, .cooked h5, .d-editor-preview h5 {
  font-size: 1.1em;
}

h6, .cooked h6, .d-editor-preview h6 {
  font-size: 1em;
}

hr {
  margin: 2.5em 0;
}

code, kbd, pre, samp {
  font-family: 'Roboto Mono',monospace;
  font-size: 92%;
}

// Link color

a, a:visited {
  color: $guild-link;
}

// Bullets

.cooked, .d-editor-preview {
  ul {
    list-style: none;
  }
  
  ul li::before {
    float: left;
    content: $fa-square-full;
    color: $primary-high;
    margin-left: calc(-3em + 2px);
    font-size: 5px;
    position: relative;
    top: calc(1em + 2.5px);
    font-family: $fa-font;
    font-weight: 600;
  }
}

// Default svg icon color for icons applied with data-guild-icon

.guild-icon .svg-icon {
  color: $icon-gray;
}

// Bump line height from 1.4

.cooked, .d-editor-preview {
  line-height: 1.5;
}

// ul spacing

.cooked ul,
.d-editor-preview ul {
  padding-left: 2em;    
}

// old spacing

.cooked ol,
.d-editor-preview ol {
  padding-left: 2em;
  
  li {
    padding-left: 0.15em;
  }
}

// Restore bold to topic title

#topic-title h1 a {
  font-weight: 500;
}

// Title edit icon

#topic-title a.edit-topic .d-icon {
  color: $primary-high;
  font-size: 0.6em;
}

// Don't show suggestion to create new topic

.footer-message {
  display: none;
}

// Extend page to align with header width and fix padding.

#main-outlet {
  max-width: 1024px;
  padding: 3em;
  padding-bottom: 3em !important;
}

// Bring page up slightly

#main {
  padding-top: 110px;
  padding-bottom: 110px;
}

// Code style

code {
  padding: 0 0.2em;
  color: lighten($primary, 10%);
}

a code,
a:visited code {
  color: $guild-link;
}

// Darken blockquote background

blockquote {
  border-left: 5px solid #e0e0e0;
  background-color: #f6f6f6;
}

// Code in pars and table cells should be highlighted with background.

p code,
td code {
  border-radius: 1px;
  background-color: $code-bg;
}

// Code block format: darken, round corners, padding.

pre code, .hljs {
  border-radius: 3px;
  background-color: $code-bg;
  padding: 0.5em 0.7em;
}

// Remove max height for Guild docs.

.guild-docs pre code {
  max-height: unset;
}

// Show 'command' and 'output' examples with dark theme

pre code.lang-command,
pre code.lang-output {
  color: #fff;
  background-color: #444;
}

// Tweak button format

.copy-codeblocks .copy-cmd {
  border: none;
  border-radius: 2px;
  top: 0.5em;
  right: 0.5em;
  padding: 6px 9px;
  font-family: 'Roboto',sans-serif;
}

.btn,
img.logo-small,
.nav-pills > li > a,
.select-kit.dropdown-select-box .dropdown-select-box-header {
  border-radius: 0;
}

// Command help option format

.cooked table td.guild-cmd-option {
  white-space: nowrap;
}

// Table styles

.cooked table thead th,
.d-editor-preview table thead th {
  font-weight: normal;
}

.cooked table td,
.d-editor-preview table td,
.cooked table th,
.d-editor-preview table th {
  padding: 4px 0.6em 4px;
  vertical-align: baseline;
}

// Guild document section

.guild-docs-section ul {
  list-style-type: none;
  padding-left: 0;

  li {
    padding: 0.15em 0;

    svg {
      color: desaturate($tertiary, 100%);
      margin-right: 0.3em;
    }
  }
}

.guild-docs-commands-section ul {
  list-style-type: none;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(50%, 1fr));

  li {
    line-height: inherit;
  }
}

// Color and drop shadow for header

header.d-header {
  background: $guild-blue;
  box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.5);
}

// Color and hover behavior for header links (same as main site)

.custom-header-links {
  margin-right: 0px;
  .headerLink a {
    color: rgba(255,255,255,0.8);
    font-size: 1.2em;
    transition: 0.25s ease;
    &:hover {
      color: #fff;
    }
  }
}

// Header icons color and size

.d-header-icons .d-icon {
  color: #fff;
  height: 23px;
}

// Header buttons style

.d-header .login-button, 
.d-header .sign-up-button {
  background: rgba(255,255,255,0.33);
  border: none;
}

// Reverse colors for smaller header (used when scrolling down on doc)

.extra-info-wrapper {
  padding-left: 0.8em;
  
  .header-title {
    margin: 0;
  }
  
  .topic-link {
    color: #fff;
  }
  
  .topic-statuses .d-icon {
    color: #ccc;
  }
  
  .badge-wrapper .badge-category .category-name {
    color: #ccc;
  }
}

// Restore border to drop downs (removed by graceful)

.list-controls .combo-box .combo-box-header {
  border: 1px solid #e9e9e9;
}

// Nudge pin icon to left

.title-wrapper .topic-statuses {
  margin-right: 0.2em;
  position: relative;
  left: -2px;
}

// Header buttons

.select-kit.dropdown-select-box .dropdown-select-box-header,
.list-controls .btn {
  background-color: #f6f6f6;
}

// Reinstate highlights for selected nav option

.nav-pills > li.active > a,
.nav-pills > li > a.active {
  color: #fff;
  background: #ff505a !important;
}

// Nothing between breadcrumbs

ol.category-breadcrumb {
  border: none;
}

// Captions - denoted using data-guild-class="caption"

.caption {
  color: $primary-high;
  font-style: italic;
  padding: 0 0.5em;
  display: block;
  margin-top: -0.5em;
  
  code {
    background: inherit;
    color: inherit;
  }
}

// Hide some header links when menus are hidden to provide more room for topic title

.hide-menus .header-buttons .features,
.hide-menus .header-buttons .examples {
  display: none;
}

// Left margin for header buttons. Need to select first button to apply

.header-buttons button:first-of-type {
  margin-left: 20px;
}

// Onebox: GitHub link style

.d-toc-regular .d-toc-ignore {
  font-size: unset;
  font-weight: normal;
}

// Onebox: border and margin

aside.onebox {
  all: unset;
}

pre.onebox {
  margin: 0;

  code ol.lines {
    margin: 0 0 0 20px;
    padding-inline-start: 20px;

    li {
      border: none;
      margin-left: 0;
    }
  }
}

// Onebox: code background consistent with other code

pre.onebox code {
  background-color: #f6f6f6;
}

// Onebox: lighten GitHub icon

aside.onebox.githubblob .source {
  opacity: 0.8;
   a {
     color: #666;
   }
}

// TOC active styling

.d-toc-regular .d-toc .d-toc-item.d-toc-active a {
  text-shadow: unset;
  font-weight: 500;
}

// Command line prompt

.command-line-prompt {
  position: absolute;
  top: 0.5em;
  left: 0.7em;
  color: #b0b0b0;
}

pre code.lang-command {
  padding-left: 1.8em;
}

// Hide suggested topics message

.suggested-topics-message {
  display: none;
}

// Term definition table

.terms table {
  td {
    vertical-align: top;
  }
  
  td:nth-child(1) {
    white-space: nowrap;
    color: $primary-high;
    
    code {
      background: inherit;
    }

    svg {
      color: $primary-high;
      margin-right: 0.3em;
    }
  }
}

// Callout styles

@mixin callout-icon {
  color: $icon-gray;
  font-family: $fa-font;
  font-weight: 600;
  margin-right: 0.4em;
}

.callout {
  display: block;
  margin-bottom: 0.3em;
  font-size: 90%;
  color: darken($primary-high, 20%);

  svg {
    margin-right: 0.3em;
  }
  
  &.tip {
    &::before {
      @include callout-icon;
      content: $fa-check-circle;
    }
    &::after {
      content: "TIP";
    }
  }
  
  &.info {
    &::before {
      @include callout-icon;
      content: $fa-info-circle;
    }
    &::after {
      content: "INFO";
    }
  }
  
  &.note {
    &::before {
      @include callout-icon;
      content: $fa-info-circle;
    }
    &::after {
      content: "NOTE";
    }
  }
  
  &.important {
    &::before {
      @include callout-icon;
      content: $fa-exclamation-circle;
    }
    &::after {
      content: "IMPORTANT";
    }
  }
  
  &.highlight {
    &::before {
      @include callout-icon;
      content: $fa-stars;
      position: relative;
      bottom: 1px;
    }
    &::after {
      content: "HIGHLIGHT";
    }
    // Reset from Discourse 'highlight' class, which changes the bg color.
    background-color: unset;
  }
  
  &.highlights {
    &::before {
      @include callout-icon;
      content: $fa-stars;
      position: relative;
      bottom: 1px;
    }
    &::after {
      content: "HIGHLIGHTS";
    }
  }
}

// Code highlight - remove bold

.hljs-keyword,
.hljs-subst, 
.hljs-request, 
.hljs-status,
.hljs-title, 
.hljs-name, 
.hljs-params, 
{
  font-weight: normal;    
}

// Image borders

.lightbox-wrapper .lightbox {
  box-shadow: rgba(0, 0, 0, 0.3) 0 0 7px;
}

.lightbox-wrapper, 
.lightbox-wrapper * {
  border-radius: 3px;    
}

// Circular avator icon

#_current-user .icon {
  border-radius: 50%;
  
  &:hover {
    background: none;
  }
}

img.avatar {
  border-radius: 50%;   
}

// TOC indent spacing

:not(.rtl) .d-toc-regular .d-toc .d-toc-subheading {
  padding-left: 1em;
  
  .d-toc-subheading {
    padding-left: 1em;
    
    .d-toc-subheading {
      padding-left: 1em;
      
      .d-toc-subheading {
        padding-left: 1em;
      }
    }
  }
}

// Bump TOC left side spacing from rule

:not(.rtl) .d-toc-regular .d-toc .d-toc-heading {
  padding-left: 15px;
  
  .d-toc-active::before {
    left: -15px;
  }
}

// Terms bullet list

.terms ul {
  padding-left: 1.5em;
  list-style-type: none;
  
  .term {
    position: relative;
    left: -1.5em;
  }
  
  li {
    padding-bottom: 0.5em;
    
    &::before {
      content: "";  // disable default bullet content
    }
  }
}

// Suggested topics contribute space to the bottom of the page.

.suggested-topics {
  padding-bottom: 0px;
}

// External link styles

a.ext::after {
  font-family: $fa-font;
  content: $fa-external-link-alt;
  font-size: 0.7em;
  margin-left: 0.3em;
  opacity: 0.75;
}

// Directory list styles

@mixin ls-icon {
  color: $icon-gray;
  font-family: $fa-font;
  font-weight: 600;
  font-size: 0.9em;
  width: 1.5em;
  display: inline-block;
}

.ls-dir-open {
  &::before {
    @include ls-icon;
    content: $fa-folder-open;
  }
}

.ls-dir {
  &::before {
    @include ls-icon;
    content: $fa-folder;
  }
}

.ls-file {
  &::before {
    @include ls-icon;
    content: $fa-file;
    padding-left: 2px;
    width: calc(1.5em - 2px);
  }
}

.ls-1 {
  margin-left: 1.5em;
}

.ls-2 {
  margin-left: 3em;
}

.ls-3 {
  margin-left: 4.5em;
}

.ls-4 {
  margin-left: 6em;
}

.ls-5 {
  margin-left: 7.5em;
}

.ls-6 {
  margin-left: 9em;
}

// Next button styles

.btn.next {
  background-color: $quaternary;
  padding: 7px 12px;
  min-height: unset;
  a {
    color: $secondary;
  }
  &::after {
    font-family: $fa-font;
    content: $fa-angle-double-right;
    color: $secondary;
    font-size: 0.8em;
    margin-left: 0.5em;
  }
}

// Remove lower space from images in editor preview

.d-editor-preview .image-wrapper {
  padding: 0;
}

// Details toggle styles

@mixin details-icon {
  font-family: $fa-font;
  font-size: 0.8em;
  margin-left: 0.5em;
}

details summary {
  color: $guild-link;
  font-size: calc(100% - 1.2px);
}

summary::before {
  content: "Show";
  margin: 0;
}

summary::after {
  @include details-icon;
  content: $fa-angle-double-right;
}

details[open]>summary::before,
details.open>summary::before {
  content: "Hide";
  margin: 0;
}

details[open]>summary::after,
details.open>summary::after {
  @include details-icon;
  content: $fa-angle-double-left
}
